<script src="https://cdn.jsdelivr.net/gh/netizenorg/netnet-standard-library/build/nn.min.js"></script>
<script>
/* global nn */ 
  
const GIF = "bird_2.gif"
const COLOR = "cornsilk"

let multiplier = 360

const createGIF = function(x, y){
  let rotate = (x+y) / (nn.width) * multiplier
  nn.create("img")
    .set({src: GIF})
    .css({
      position: "absolute",
      left: x,
      top: y,
      transform: `rotate(${rotate}deg)`
    })
    .addTo("body")
}

async function setup(){
  nn.get("body").css({backgroundColor: COLOR})
  
  nn.create('input')
    .set({
      type: 'range',
      min: 360,
      max: 3600,
      value: 360,
      step: 360
    })
    .addTo('body')
    .on('input', (e) => {
      multiplier = Number(e.target.value)
      nn.getAll("img").forEach((img) => {
        let rotate = (img.x+img.y) / (nn.width) * multiplier
        img.style.transform = `rotate(${rotate}deg)`
      })
      console.log(multiplier)
    })
    .css({
      position: "absolute",
      left: 10,
      bottom: 10,
      width: nn.width - 20,
      zIndex: 10
    
  })
  
  const gif = await nn.loadImage(GIF)
  
  let num_birds = 50
  let num_rows = 50
  for (let i = 0; i < num_birds; i++){
    let x = nn.width / num_birds * i - gif.width/2 + 1
    for (let j = 0; j < num_rows; j++){
      let y = (nn.height * 0.9) / num_rows * j + 1
      createGIF(x, y)
    }
  }
}
  
nn.on("load", setup)
  
</script>