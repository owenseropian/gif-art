<script src="https://cdn.jsdelivr.net/gh/netizenorg/netnet-standard-library/build/nn.min.js"></script>
<script>
/* global nn */ 
  
const GIF = "bird_2.gif"
const COLOR = "cornsilk"

let multiplier = 360

const createGIF = function(x, y, angle){
  let rotate = angle / (Math.PI*2) * multiplier
  nn.create("img")
    .set({src: GIF})
    .css({
      position: "absolute",
      left: x,
      top: y,
      transform: `rotate(${rotate}deg)`
    })
    .addTo("body")
}

async function setup(){
  nn.get("body").css({backgroundColor: COLOR})
  
  /*nn.create('input')
    .set({
      type: 'range',
      min: 0,
      max: 3600,
      value: multiplier,
      step: 1
    })
    .addTo('body')
    .on('input', (e) => {
      multiplier = Number(e.target.value)
      nn.getAll("img").forEach((img) => {
        let rotate = (img.x+img.y) / (nn.width) * multiplier
        img.style.transform = `rotate(${rotate}deg)`
      })
      console.log(multiplier)
    })
    .css({
      position: "absolute",
      left: 10,
      bottom: 10,
      width: nn.width - 20,
      zIndex: 10
    
  })*/
  
  const gif = await nn.loadImage(GIF)
  
  let num_birds = 50
  let num_circles = 3
  for (let i = 0; i < num_birds; i++){
    for (let j = 0; j < num_circles; j++){
      let x = (nn.width - gif.width) / 2 
      let y = (nn.height - gif.height) / 2 
      let radius = Math.min(x, y) * ((j+1)/num_circles)
      let angle = (2*Math.PI)/(num_birds)*i
      x += Math.cos(angle) * radius
      y += Math.sin(angle) * radius
      createGIF(x, y, angle)
    }
  }
}
  
nn.on("load", setup)
  
</script>